<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercícios JS</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,500;0,900;1,300;1,400;1,500;1,900&display=swap" rel="stylesheet">

    <!-- CSS Page -->
    <link rel="stylesheet" href="./css/stylesheet.css">

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <!-- HTML -->
    <main id="container">
        <aside id="navigation-menu">
            <h3>Exercícios</h3>
            <nav class="exercicios-nav">
                <a href wm-link="exercicios/exercicio1.html" wm-destino="#challenges">Exercicio 1</a>
                <a href wm-link="exercicios/exercicio2.html" wm-destino="#challenges">Exercicio 2</a>
            </nav>
        </aside>
    
        <section id="exercises">
            <div id="challenges"></div>
        </section>
    </main>

<!-- JS -->
<script>
    function navegarViaAjax(url, seletor, push = true) {
            if(!url || !seletor) return
            const elemento = document.querySelector(seletor)
            fetch(url)
                .then(resp => resp.text())
                .then(html => {
                    elemento.innerHTML = html
                    if(push) {
                        history.pushState({ seletor }, null, url)
                    }
                })
        }

        document.querySelectorAll('[wm-link]').forEach(link => {
            const url = link.attributes['wm-link'].value
            const seletorDestino = link.attributes['wm-destino'].value

            link.onclick = e => {
                e.preventDefault()
                navegarViaAjax(url, seletorDestino)
            }
        })

        window.onpopstate = e => {
            if(e.state) {
                navegarViaAjax(window.location.href, e.state.seletor, false)
            }
        }
</script>
<script type="text/javascript" src="./js/funcoes.js"></script>

</body>
</html>